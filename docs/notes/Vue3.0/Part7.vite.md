## 1、webpack 打包过程：

- 识别入口文件
- 逐级递归识别依赖，构建依赖图谱（分析）
- 将代码转换成 AST 抽象语法树（转换）
- 将 AST 抽象语法树编译成浏览器可识别的代码（编译）
- 输出

#### 1.1、webpack 缺点

- 基于打包器的方式，在提供服务前`急切`地抓取和构建整个应用，启动速度慢
- 使用 node.js 实现，构建速度慢
- 热更新效率低下

## 2、vite 优点

- vite 的主要功能是通过劫持浏览器的请求，在后台简单处理后再将文件返回给浏览器；整个过程没有对文件进行打包编译，快！
- vite 将应用中的模块分为`依赖`和`源码`两类，改进了开发服务的启动时间。
- vite 使用 EsBuild 预构建依赖（Go 语言编写，比 js 编写的打包器与构建依赖快了 10-100 倍），webpack 基于 node
- vite 以原生的 ESM 方式服务源码（利用了浏览器的 ES Module Imports 特性，只有在真正需要时才编译文件），实际上是让浏览器接管了打包程序的部分工作，vite 只需要在浏览器请求时按需提供源码。
- 在 Vite 中，HMR 是在原生 ESM 上执行的。当某个模块内容改变时，让浏览器重新请求该模块，高效！

#### 2.1、当你首次启动 vite 时，Vite 在本地加载你的站点之前预构建了项目依赖，目的：

- CommonJS 和 UMD 兼容性: 开发阶段中，Vite 的开发服务器将所有代码视为原生 ES 模块。因此，Vite 必须先将作为 CommonJS 或 UMD 发布的依赖项转换为 ESM。
- 性能：为了提高后续页面的加载性能，Vite 将那些具有许多内部模块的 ESM 依赖（如 lodash.js）项转换为单个模块，减少浏览器请求次数。
